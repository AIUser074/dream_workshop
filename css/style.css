@font-face {
    font-family: 'GeumEunBoHwa';
    src: url('../assets/font/나눔손글씨 금은보화.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}
@font-face {
    font-family: 'Amsterdam';
    src: url('../assets/font/나눔손글씨 암스테르담.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

body, html {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background-color: #000; /* 레터박스 색상 */
    display: flex;
    justify-content: center;
    align-items: center;
}

#game-viewport {
    position: relative;
    width: 100vw; /* 가로 고정: 화면 가로에 맞춤 */
    height: 100vh; /* 기본 폴백 */
    height: 100dvh; /* 모바일 주소창 변화 대응, 레터박스 제거 */
    overflow: hidden;
    margin: auto;
}

#game-container {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    background-image: url('../assets/images/ui/Title_bg.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

.title-screen {
    text-align: center;
    color: #4a4a4a; /* 기존 white에서 짙은 회색으로 변경하여 가독성 확보 */
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: opacity 0.5s ease-out; /* 페이드아웃 효과를 위한 transition 추가 */
}

.title-screen.fade-out {
    opacity: 0;
    pointer-events: none;
}

.title-container {
    position: relative;
    display: block;
    margin-top: -6%; /* 타이틀 크기 축소에 맞춰 위치 조정 */
    transform: translateY(0); /* 초기 위치를 0으로 명시하여 점프 방지 */
    animation: title-float 6s ease-in-out 1.6s infinite alternate; /* 타이틀과 구름을 함께 부드럽게 이동 */
    will-change: transform;
}

.title-cloud {
    position: absolute;
    top: 40%; /* 중앙으로 살짝 내려서 안정감 부여 */
    left: 50%;
    transform: translate(-50%, -50%);
    width: 140%; /* 타이틀 크기 축소에 맞춰 구름 크기 조정 */
    max-width: none; /* 고정 뷰포트에서는 불필요 */
    z-index: 1;
    opacity: 0.9;
    filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.12));
    pointer-events: none; /* 구름이 버튼 상호작용을 가로막지 않도록 */
    animation: cloud-float 10s ease-in-out 1.6s infinite alternate; /* 더 동적인 플로팅 */
}

.game-title {
    position: relative;
    z-index: 2; /* 구름 위에 표시 */
    font-family: 'GeumEunBoHwa', cursive; /* 금은보화 폰트 우선 적용 */
    /* font-size는 JS에서 동적으로 설정하므로 rem 단위 제거 */
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.25); /* 가독성을 위해 그림자 강화 */
    animation: slide-up 1.5s ease-out forwards;
    opacity: 0;
    transform: translateY(50px);
    font-weight: bold; /* 브라우저 자체 볼드 처리 */
    letter-spacing: 0; /* 자간을 줄여 텍스트 너비 축소 */
    -webkit-text-stroke: 0; /* 색상이 다양해지므로 외곽선은 제거 */
    white-space: nowrap; /* 타이틀 줄바꿈 방지 */
}

.game-title span:nth-child(1) {
    color: #ffb3ba; /* 파스텔 핑크 */
}
.game-title span:nth-child(2) {
    color: #ffdfba; /* 파스텔 오렌지 */
}
.game-title span:nth-child(3) {
    color: #baffc9; /* 파스텔 민트 */
}

.start-button {
    font-family: 'GeumEunBoHwa', cursive; /* 폰트 통일 */
    padding: 1.8% 4%; /* 패딩을 줄여 크기 축소 */
    border: none;
    border-bottom: 5px solid #c06c6c; /* 입체감을 위한 하단 테두리 */
    border-radius: 50px;
    background-color: #ffffff;
    color: #e57373;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    transition: all 0.15s ease-out; /* 전환 속도 조절 */
    margin-top: 5%;
    animation: fade-in 1s 1s ease-in forwards;
    opacity: 0;
    font-weight: bold;
    letter-spacing: 0.5px;
    position: relative;
    z-index: 3;
}

.start-button:hover {
    transform: translateY(-2px); /* 호버 시 미세하게 이동 */
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
}


@keyframes slide-up {
    from {
        opacity: 0;
        transform: translateY(50px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fade-in {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes cloud-float {
    0%   { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
    25%  { transform: translate(calc(-50% + 0.8%), -49.6%) scale(1.008) rotate(0.12deg); }
    50%  { transform: translate(calc(-50% + 1.2%), -49.0%) scale(1.012) rotate(0.2deg); }
    75%  { transform: translate(calc(-50% - 0.6%), -49.4%) scale(1.006) rotate(0.1deg); }
    100% { transform: translate(-50%, -48.8%) scale(1) rotate(0deg); }
}

@keyframes title-float {
    from { transform: translateY(0); }
    to { transform: translateY(1.2%); }
}

.hidden {
    display: none !important;
}

/* ===== Pastel Theme Variables & Utilities ===== */
:root {
    --pastel-pink: #ffb3ba;
    --pastel-orange: #ffdfba;
    --pastel-mint: #baffc9;
    --pastel-blue: #a0e7e5;
    --ink: #4a4a4a;
    --glass-bg: rgba(255, 255, 255, 0.55);
    --glass-stroke: rgba(255, 255, 255, 0.9);
    --shadow: 0 6px 12px rgba(0, 0, 0, 0.12);
    /* solid panel tones for opaque badges */
    --panel-bg: #d8a187; /* warm wood-like */
    --panel-stroke: #8f5a49; /* darker edge */
}

.glass {
    background: var(--glass-bg);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    box-shadow: var(--shadow);
}

.badge {
    padding: 0.2rem 0.5rem;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,0.6);
}

.fade-slide-in {
    opacity: 0;
    transform: translateY(10px);
    animation: fadeSlideIn 600ms ease-out forwards;
}

@keyframes fadeSlideIn {
    to { opacity: 1; transform: translateY(0); }
}

/* Main Workshop UI */
#main-container {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    background-image: url('../assets/images/ui/main_bg.png');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    /* opacity와 animation 제거 */
    font-family: 'Amsterdam', 'GeumEunBoHwa', cursive; /* 메인 UI 전용 폰트 */
}

/* mainEnter 키프레임 제거 또는 주석 처리 */
/*
@keyframes mainEnter {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
}
*/

/* 상태 바 - 분리된 배지 스타일 */
.status-bar {
    position: absolute;
    top: env(safe-area-inset-top, 0px);
    left: 0;
    right: 0;
    z-index: 20;
    display: flex;
    justify-content: space-between; /* 양 끝 정렬로 변경 */
    align-items: flex-start; /* 상단 기준 정렬 */
    gap: clamp(6px, 1.5vw, 16px);
    padding: clamp(4px, 1vw, 8px) clamp(8px, 3vw, 16px);
    animation: fadeSlideIn 700ms ease-out 200ms forwards;
    box-sizing: border-box;
}

.status-group-center {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: clamp(6px, 1.5vw, 16px);
    flex-wrap: wrap;
}

/* 왼쪽 상단 메인 레벨 배지 스타일 */
.level-badge-main {
    position: relative; /* 다리 기준점 */
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px; /* 레벨 텍스트와 경험치 바 사이 간격 */
    background: #8a9aab !important; /* 색상 강제 적용 */
    border: 2px solid #5d6b7a !important; /* 테두리 강제 적용 */
    padding: clamp(6px, 1vw, 8px) clamp(16px, 2.5vw, 22px);
    transform: translateY(0) !important; /* 처음부터 내려와 있도록 위치 고정 */
    box-shadow: 0 8px 12px rgba(0,0,0,0.22);
    transition: none !important; /* 호버 효과 제거 */
}

.sign-legs {
    position: absolute;
    bottom: 95%;
    left: 15%;
    right: 15%;
    height: 10px;
    background: transparent;
    border-left: 4px solid #5d6b7a;
    border-right: 4px solid #5d6b7a;
}

.level-badge-main .badge-text {
    color: #fff;
    text-shadow: 1px 1px 1px rgba(0,0,0,0.3);
    padding: 0; /* 불필요한 패딩 제거로 중앙 정렬 보정 */
    padding-left: clamp(4px, 1vw, 8px); /* 왼쪽 여백 살짝 부여 */
}

.xp-bar-container {
    width: calc(100% - clamp(4px, 1vw, 8px));
    height: 10px;
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 5px;
    overflow: hidden;
    margin-left: clamp(4px, 1vw, 8px);
}

.xp-bar-fill {
    width: 20%;
    height: 100%;
    background-color: #a8d5e2;
}


.settings-button {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
}

.settings-button img {
    width: clamp(28px, 2.5rem, 40px);
    height: auto;
    transition: transform 0.2s ease;
}

.settings-button:hover img {
    transform: rotate(45deg);
}


.status-badge {
    display: flex;
    align-items: center;
    gap: clamp(4px, 1vw, 8px);
    padding: clamp(4px, 0.8vw, 6px) clamp(10px, 2vw, 14px);
    padding-left: clamp(4px, 1vw, 8px); /* 좌측 패딩 추가 */
    background: var(--panel-bg); /* 불투명 패널 */
    border: 2px solid var(--panel-stroke);
    border-radius: 6px; /* 각진 느낌 */
    box-shadow:
        0 6px 10px rgba(0,0,0,0.18), /* drop */
        inset 0 1px 0 rgba(255,255,255,0.35), /* top highlight */
        inset 0 -2px 3px rgba(0,0,0,0.08); /* inner shade */
    transition: transform 120ms ease, box-shadow 120ms ease;
}

.status-badge:hover {
    transform: translateY(-1px);
    box-shadow:
        0 8px 12px rgba(0,0,0,0.2),
        inset 0 1px 0 rgba(255,255,255,0.4),
        inset 0 -2px 3px rgba(0,0,0,0.1);
}

.badge-icon {
    width: clamp(18px, 1.8rem, 32px);
    height: clamp(18px, 1.8rem, 32px);
    object-fit: contain;
    filter: none; /* 불투명 스타일에 맞춰 하이라이트 제거 */
}

.badge-text {
    font-family: 'Amsterdam', 'GeumEunBoHwa', cursive;
    font-weight: 700; /* 선명한 볼드 */
    font-size: clamp(18px, 1.8rem, 22px);
    color: #2c2320; /* 패널 위에서 잘 보이는 잉크 색 */
    white-space: nowrap;
}

/* 개별 배지 색상 강조 - day-badge와 level-badge 제거 */
.fame-badge { border-color: var(--panel-stroke); }
.gold-badge { border-color: var(--panel-stroke); }

.atelier-table {
    position: absolute;
    bottom: -12%; /* 살짝 위로 올림 (-17% -> -14%) */
    left: 0;
    width: 100%;
    pointer-events: none; /* 테이블이 다른 UI 요소 클릭을 막지 않도록 */
    z-index: 12; /* NPC보다 위에 오도록 설정 */
}

.status-right {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}

.attendance-icon-button {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
}

.attendance-icon-button img {
    width: clamp(36px, 4rem, 50px);
    height: auto;
    transition: transform 0.2s ease;
}

.attendance-icon-button:hover img {
    transform: translateY(1px);
}

/* 개별 하단 액션 버튼 */
.action-btn-individual {
    position: absolute;
    z-index: 15;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    width: clamp(70px, 16vw, 88px); /* 크기 소폭 증가 */
    height: clamp(70px, 16vw, 88px); /* 크기 소폭 증가 */
    background: #fdf6e3; /* 아이보리 */
    border: 3px solid #654321; /* 짙은 갈색 */
    border-radius: 12px;
    box-shadow: 0 6px 0 0 #654321; /* 입체감을 위한 두꺼운 그림자 */
    cursor: pointer;
    transition: all 0.1s ease-out;
}

.action-btn-individual:active {
    transform: translateY(4px);
    box-shadow: 0 2px 0 0 #654321;
}

#btn-upgrade { bottom: 9%; left: 5%; } /* 3% -> 5% */
#btn-shop { bottom: 9%; left: 28%; }
#btn-decorate { bottom: 9%; right: 28%; }
#btn-log { bottom: 9%; right: 5%; }

.action-icon {
    width: clamp(30px, 5.5vw, 40px); /* 아이콘 크기 소폭 증가 */
    height: clamp(30px, 5.5vw, 40px); /* 아이콘 크기 소폭 증가 */
    object-fit: contain;
}

.action-label {
    font-family: 'Amsterdam', 'GeumEunBoHwa', cursive;
    font-weight: 700;
    font-size: clamp(15px, 2.8vw, 17px); /* 폰트 크기 소폭 증가 */
    color: #654321;
}

/* NPC & Dialog Box - 동적 생성 대응 */
.npc-wrapper {
    position: absolute;
    bottom: 12%; /* 10% -> 12% */
    left: 50%;
    transform: translateX(-50%);
    width: clamp(180px, 35vw, 240px); /* data.js의 baseScale로 덮어쓰여짐 */
    z-index: 5; /* 테이블 뒤에 오도록 */
    display: flex;
    flex-direction: column;
    align-items: center;
    visibility: hidden; /* 초기에는 숨김 */
}

.npc-wrapper img {
    width: 100%;
    transform: translateY(100%);
    opacity: 0;
    transform-origin: bottom center; /* 스쿼시/스트레치 기준 */
}

/* Entrance animation - forwards 제거 */
.npc-wrapper.animate-enter img {
    animation: npc-pop-up 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.5s;
}

/* Idle animation for all NPCs */
.npc-wrapper.npc-idle img {
    /* 애니메이션 시작 전 초기 상태를 등장 후 상태와 동일하게 설정 */
    transform: translateY(0);
    opacity: 1;
    animation: npc-idle 2.8s ease-in-out infinite alternate;
}

@keyframes npc-idle {
    0%   { transform: translateY(0) scaleX(1.00) scaleY(1.00); }
    50%  { transform: translateY(0) scaleX(0.985) scaleY(1.015); }
    100% { transform: translateY(0) scaleX(1.01) scaleY(0.99); }
}

.dialog-box {
    position: absolute;
    background: #fff;
    border: 3px solid #654321;
    border-radius: 12px;
    padding: 12px;
    text-align: center;
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    opacity: 0;
    visibility: hidden;
    transform: none !important; /* JS에서 transform을 직접 제어하므로 초기화 */
}

.dialog-box::after, .dialog-box::before {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    border-style: solid;
}
.dialog-box::after { /* a little bigger for border */
    bottom: -13px;
    border-width: 13px 13px 0 13px;
    border-color: #654321 transparent transparent transparent;
}
.dialog-box::before {
    bottom: -10px;
    border-width: 11px 11px 0 11px; /* 테두리를 완전히 덮도록 크기 살짝 키움 */
    border-color: #fff transparent transparent transparent;
    z-index: 1;
}

.dialog-text {
    margin: 0;
    font-family: 'Amsterdam', 'GeumEunBoHwa', cursive;
    font-weight: 700;
    font-size: clamp(16px, 2.8vw, 20px); /* 폰트 크기 증가 */
    color: #654321;
}

.dialog-text span {
    display: none; /* 레이아웃에서 제외하여 커서가 끝 글자 옆에 위치 */
}
.dialog-text span.visible {
    display: inline;
}

/* 타자기 커서 효과 */
.dialog-text.typing::after {
    content: '|';
    animation: blink 1s step-end infinite;
    margin-left: 2px;
    font-weight: 100;
}

@keyframes blink {
    from, to { color: transparent; }
    50% { color: #654321; }
}

/* Animations */
.animate-enter { visibility: visible !important; }
.dialog-box.animate-enter { animation: dialog-fade-in 0.4s ease-out 1.2s forwards; }

@keyframes npc-pop-up {
    from { transform: translateY(100%); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

@keyframes dialog-fade-in {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

/* '다음' 화살표 스타일 */
.next-arrow {
    position: absolute;
    bottom: 8px;
    right: 12px;
    font-size: clamp(12px, 2vw, 14px);
    color: #654321;
    visibility: hidden; /* 평소에는 숨김 */
    opacity: 0;
    transition: opacity 0.2s ease;
}

.next-arrow.visible {
    visibility: visible;
    opacity: 1;
    animation: bounce-arrow 0.8s ease-in-out infinite;
}

@keyframes bounce-arrow {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-4px);
    }
}

/* ===== 화면 전환 스타일 (수정) ===== */
.screen {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    /* opacity와 transform을 함께 transition하도록 설정 */
    transition: transform 0.6s cubic-bezier(0.45, 0, 0.55, 1), opacity 0.5s ease-out;
}

/* 슬라이드 효과를 위한 기본 상태 */
.screen.screen-slide {
    transform: translateX(100%);
    opacity: 1; /* 페이드 효과 방지를 위해 명시적으로 불투명하게 설정 */
}

/* 페이드 효과를 위한 기본 상태 */
.screen.screen-fade {
    transform: translateX(0); /* 슬라이드되지 않도록 위치 고정 */
    opacity: 0;
    pointer-events: none;
}

/* 화면이 활성화되었을 때의 상태 */
.screen.active-screen {
    transform: translateX(0);
    opacity: 1;
    pointer-events: auto;
}

/* 슬라이드로 퇴장할 때의 상태 */
.screen.exit-left {
    transform: translateX(0); /* 왼쪽으로 밀려나가지 않고 제자리에 머물 */
    opacity: 1; /* 퇴장 시 페이드아웃 되지 않도록 불투명 상태 유지 */
}

/* ===== 그림 그리기 모드 UI 스타일 (수정) ===== */
#drawing-mode-container {
    /* position, inset 등은 .screen 에서 상속받으므로 제거 가능 */
    background-image: url('../assets/images/ui/draw_bg.png');
    background-size: cover;
    background-position: center;
    z-index: 50;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden; /* 내부 요소가 넘치지 않도록 */
}

.drawing-table-top,
.drawing-table-bottom {
    position: absolute;
    left: 0;
    width: 100%;
    z-index: 52;
    pointer-events: none; /* 테이블이 마우스/터치 이벤트를 가로채지 않도록 설정 */
}

.drawing-table-top {
    top: -18%; /* 더 위로 이동 */
    transform: rotate(180deg); /* 위쪽 테이블은 뒤집어서 사용 */
}

.drawing-table-bottom {
    bottom: calc(env(safe-area-inset-bottom, 0px) - 18%); /* 테이블 더 위로 (기존 -18%) */
}

.canvas-wrapper {
    position: relative;
    width: 110%; /* 캔버스 너비 매우 확대 */
    height: 110%; /* 캔버스 높이도 확대 */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 51;
    top: 5%; /* 캔버스 살짝 내리기 */
}

.drawing-canvas-img {
    width: 110%;    /* 캔버스 이미지 크기 매우 확대 */
    height: auto;
    max-height: 110%; /* 최대 높이도 크게 허용 */
    object-fit: contain;
    filter: drop-shadow(0 10px 20px rgba(0,0,0,0.2));
}

/* 드로잉 캔버스 */
#paint-canvas {
    position: absolute;
    inset: 0; /* wrapper 가이드 안에서 가득 채움 (이미지와 동일 비율) */
    width: 100%;
    height: 100%;
    pointer-events: auto; /* 입력 허용 */
    clip-path: inset(15% 5% 22.7% 5% round 10px);
    touch-action: none; /* 모바일 터치 스크롤 등 기본 동작 비활성화 */
}

/* ===== 그림 그리기 도구 UI 스타일 ===== */
.drawing-tools-wrapper {
    position: absolute;
    bottom: calc(env(safe-area-inset-bottom, 0px) + 6%); /* 하단 UI 더 위로 (기존 +6%) */
    left: 0; /* 전체 폭 사용 */
    transform: none; /* 중앙 변환 해제 */
    width: 100%; /* 화면 가로 전체 사용 */
    z-index: 53; /* 테이블 위에 오도록 */
    display: flex;
    align-items: center;
    justify-content: flex-start; /* 좌측부터 배치 시작 */
    gap: 2vw; /* 간격을 vw로 고정 */
    background-color: rgba(0, 0, 0, 0.1);
    padding: 1vw 5%; /* vw 기반 패딩 */
    box-sizing: border-box; /* 패딩 포함 너비 계산 */
    border-radius: 0; /* 전체 폭 바에서 라운드 제거 */
}

.color-palette {
    display: flex;
    gap: 10px;
}

.color-btn {
    width: 4.2vw; /* 고정 비율 */
    height: 4.2vw; /* 고정 비율 */
    border-radius: 50%;
    border: 2px solid transparent; /* 테두리 두께 유지 */
    cursor: pointer;
    transition: all 0.2s ease;
}

.color-btn:hover {
    transform: scale(1.1);
}

.color-btn.active {
    border-color: #654321; /* 다른 버튼과 동일한 갈색 테두리 */
    box-shadow: none; /* 빛나는 효과 제거 */
    transform: scale(1.1); /* 선택되었음을 나타내는 확대 효과 */
}

.tool-buttons {
    display: flex;
    align-items: center;
    gap: 1.6vw; /* 고정 비율 */
    flex: 1; /* 우측 끝까지 공간 차지 */
}

/* '모두 지우기' 버튼부터 우측으로 밀기 */
#btn-reset-canvas {
    margin-left: auto;
}

.tool-btn {
    background: #fdf6e3;
    border: 2px solid #654321; /* 테두리 두께 축소 */
    border-radius: 14px; /* 모서리 둥글기 축소 */
    width: 5.6vw; /* 고정 비율 */
    height: 5.6vw; /* 고정 비율 */
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

.tool-btn:hover {
    background-color: #fff;
}

.tool-btn img {
    width: 140%; /* 아이콘 크기 증가 */
    height: 140%; /* 아이콘 크기 증가 */
    object-fit: contain;
}

/* ===== 패널/오버레이/모달 ===== */
.draw-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.2);
    z-index: 100;
}
.draw-overlay.hidden { display: none; }

.draw-panel {
    position: fixed;
    top: 18%;
    left: 50%;
    transform: translateX(-50%);
    min-width: 260px;
    max-width: 70vw;
    background: #fff;
    border: 2px solid #654321;
    border-radius: 12px;
    padding: 12px 14px;
    z-index: 101;
    box-shadow: 0 10px 24px rgba(0,0,0,0.18);
}
.draw-panel.hidden { display: none; }

.panel-header {
    font-family: 'Amsterdam', 'GeumEunBoHwa', cursive;
    font-weight: 700;
    color: #654321;
    margin-bottom: 10px;
}

.panel-grid {
    display: grid;
    grid-template-columns: repeat(6, minmax(28px, 1fr));
    gap: 8px;
}

/* 붓 크기 전용 그리드 간격 보정 */
.brush-grid {
    grid-template-columns: repeat(6, 1fr);
}

.color-swatch {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    border: 2px solid #654321;
    cursor: pointer;
}

.size-chip {
    padding: 6px 10px;
    background: #fdf6e3;
    border: 2px solid #654321;
    border-radius: 10px;
    font-family: 'Amsterdam', 'GeumEunBoHwa', cursive;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background-color 0.2s; /* 부드러운 전환 효과 */
}

.size-chip:hover {
    background: #e0d8c7;
}

.size-chip.active {
    background: #a8d5e2; /* 활성화 시 배경색 변경 */
    border-color: #5d6b7a;
}

/* 실제 붓 크기를 표현하는 점 */
.size-dot {
    display: inline-block;
    border-radius: 50%;
    border: 1px solid rgba(0,0,0,0.15);
}

.slider-row {
    display: flex;
    align-items: center;
    gap: 10px;
}
.slider-row .size-label {
    font-family: 'Amsterdam', 'GeumEunBoHwa', cursive;
    font-weight: 700;
    color: #654321;
}

.draw-modal {
    position: fixed;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 102;
}
.draw-modal.hidden { display: none; }

.modal-card {
    background: #fff;
    border: 2px solid #654321;
    border-radius: 12px;
    padding: 16px 20px;
    min-width: 260px;
    box-shadow: 0 10px 24px rgba(0,0,0,0.18);
}
.modal-message {
    font-family: 'Amsterdam', 'GeumEunBoHwa', cursive;
    font-weight: 700;
    color: #654321;
    margin-bottom: 12px;
}
.modal-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}
.modal-btn {
    background: #fdf6e3;
    border: 2px solid #654321;
    border-radius: 10px;
    padding: 6px 12px;
    cursor: pointer;
    font-family: 'Amsterdam', 'GeumEunBoHwa', cursive; /* 폰트 적용 */
    font-weight: 700; /* 폰트 두께 적용 */
    color: #654321; /* 텍스트 색상 적용 */
}
.modal-btn.confirm { background: #a8d5e2; }

/* 지우개 버튼 활성화 스타일 */
.tool-btn#btn-eraser.active {
    background-color: #a8d5e2; /* 활성화 시 배경색 변경 */
    box-shadow: inset 0 0 8px rgba(0,0,0,0.2); /* 안쪽 그림자 효과 */
}

/* ===== 그림 그리기 상단 UI 스타일 ===== */
.drawing-header {
    position: absolute;
    top: calc(env(safe-area-inset-top, 0px) + 5%); /* 아래로 내림 (기존 +0.8%) */
    left: 3%;
    right: 3%;
    z-index: 55;
}

.request-panel {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1.5vw; /* 간격 확대 */
    background: #fdf6e3;
    border: 3px solid #654321;
    border-radius: 2.5vw; /* 두께에 맞춰 반경 확대 */
    padding: 1.2vw 2vw; /* 패딩 확대 (두껍게) */
    box-shadow: 0 4px 6px rgba(0,0,0,0.15);
    box-sizing: border-box;
    position: absolute;
    z-index: 55;
}

.request-content {
    display: flex;
    align-items: center;
    gap: 1.5vw; /* 간격 확대 */
}

.timer-container {
    position: relative;
    width: 8vw; /* 크기 확대 */
    height: 8vw; /* 크기 확대 */
}

.timer-svg {
    transform: rotate(-90deg); /* 12시 방향에서 시작 */
}

.timer-bg, .timer-progress {
    fill: none;
    stroke-width: 10;
}

.timer-bg {
    stroke: rgba(0,0,0,0.2);
}

.timer-progress {
    stroke: #a8d5e2;
    stroke-linecap: round;
    stroke-dasharray: 283; /* (2 * PI * 45) */
    stroke-dashoffset: 0; /* JS로 제어 */
    transition: stroke-dashoffset 1s linear;
}

.timer-text {
    position: absolute;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Amsterdam', 'GeumEunBoHwa', cursive;
    font-weight: 700;
    color: #fff;
    font-size: 3.5vw; /* 크기 확대 */
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

.customer-portrait {
    width: 10vw; /* 크기 추가 확대 */
    height: 10vw; /* 크기 추가 확대 */
    border-radius: 1.8vw; /* 두께에 맞춰 반경 확대 */
    border: 2px solid #654321;
}

.request-text {
    margin: 0;
    font-family: 'Amsterdam', 'GeumEunBoHwa', cursive;
    font-weight: 700;
    color: #654321;
    font-size: 3.5vw; /* 크기 추가 확대 */
}

/* 하단 바: 두껍고 크게 */
.drawing-tools-wrapper {
    position: absolute;
    bottom: calc(env(safe-area-inset-bottom, 0px) + 6.5%); /* 하단 UI 더 위로 (기존 +6%) */
    left: 0;
    transform: none;
    width: 100%;
    z-index: 53;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    gap: 3.5vw; /* 간격 추가 확대 */
    background-color: rgba(0, 0, 0, 0.1);
    padding: 2vw 5%; /* 패딩 추가 확대 (더 두껍게) */
    box-sizing: border-box;
    border-radius: 0;
}

.color-btn {
    width: 9vw; /* 크기 추가 확대 */
    height: 9vw; /* 크기 추가 확대 */
    border-radius: 50%;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.2s ease;
}

.tool-buttons {
    display: flex;
    align-items: center;
    gap: 3vw; /* 간격 추가 확대 */
    flex: 1;
}

#btn-reset-canvas { margin-left: auto; }

.tool-btn {
    background: #fdf6e3;
    border: 2px solid #654321;
    border-radius: 2.5vw; /* 두께에 맞춰 반경 확대 */
    width: 11vw; /* 크기 추가 확대 */
    height: 11vw; /* 크기 추가 확대 */
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: all 0.2s ease;
}
